- name: Prepare rancher-host
  hosts: all
  roles:
     - ronnywalter.common
     - ronnywalter.ipv6
     - ronnywalter.resolv_nodes
     - ronnywalter.fail2ban
     - githubixx.ansible_role_wireguard     
     - weareinteractive.ufw  
  
#- name: Prepare rancher-cluster
#  hosts: rancher_nodes
#  vars:
#    rke2_version: v1.21.5+rke2r2
#    rke2_custom_manifests: manifests/
#    rke2_token: ljkhfewiu32ni439
#  roles:     
#     - ronnywalter.prepare_rke2
     

- name: Prepare workload-cluster
  serial: 1
  hosts: nodes
  vars:
    rke2_version: v1.21.5+rke2r2
    rke2_custom_manifests: manifests/
    rke2_token: ljkhfewiu32ni439
    rke2_server_taint: true
    disable_ingress: true
  roles:     
     - ronnywalter.prepare_rke2